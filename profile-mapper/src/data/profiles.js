// profiles.js - Backend Service
export const sampleProfiles = [
  {
    id: 1,
    name: "John Smith",
    email: "john.smith@example.com",
    phone: "+1 212-555-1234",
    address: "123 Main Street, New York, NY 10001",
    age: 28,
    occupation: "Frontend Developer",
    department: "Engineering",
    status: "Active",
    joinDate: "2023-01-15",
    avatar: "https://randomuser.me/api/portraits/men/1.jpg",
    skills: ["HTML", "CSS", "JavaScript", "React"],
    experience: "5 years",
    education: "B.Sc. in Computer Science",
    bio: "Passionate about crafting modern, accessible user interfaces.",
  },
  {
    id: 2,
    name: "Sarah Johnson",
    email: "sarah.johnson@example.com",
    phone: "+1 310-555-5678",
    address: "456 Oak Avenue, Los Angeles, CA 90210",
    age: 32,
    occupation: "Web Designer",
    department: "Product",
    status: "Active",
    joinDate: "2022-11-20",
    avatar: "https://randomuser.me/api/portraits/women/2.jpg",
    skills: ["Photoshop", "Illustrator", "Figma", "HTML"],
    experience: "4 years",
    education: "B.A. in Graphic Design",
    bio: "Creative web designer with a passion for visual storytelling.",
  },
  {
    id: 3,
    name: "Michael Brown",
    email: "michael.brown@example.com",
    phone: "+1 312-555-8765",
    address: "789 Pine Road, Chicago, IL 60601",
    age: 45,
    occupation: "Backend Developer",
    department: "Engineering",
    status: "Inactive",
    joinDate: "2021-06-10",
    avatar: "https://randomuser.me/api/portraits/men/3.jpg",
    skills: ["Node.js", "Express", "MongoDB", "SQL"],
    experience: "6 years",
    education: "M.Sc. in Computer Science",
    bio: "Loves solving complex problems through backend systems.",
  },
  {
    id: 4,
    name: "Emily Davis",
    email: "emily.davis@example.com",
    phone: "+1 786-555-2345",
    address: "321 Elm Street, Miami, FL 33101",
    age: 29,
    occupation: "Java Developer",
    department: "Engineering",
    status: "Active",
    joinDate: "2023-03-12",
    avatar: "https://randomuser.me/api/portraits/women/4.jpg",
    skills: ["Java", "Spring Boot", "Hibernate", "MySQL"],
    experience: "5 years",
    education: "B.Tech in Information Technology",
    bio: "Efficient and dedicated developer with enterprise Java experience.",
  },
  {
    id: 5,
    name: "Priyanshu Arora",
    email: "priyanshu.arora@example.com",
    phone: "+91 98123 45678",
    address: "Aggarwal City Mall, Pitampura, Delhi, India",
    age: 26,
    occupation: "Android Developer",
    department: "Engineering",
    status: "Active",
    joinDate: "2023-08-01",
    avatar: "https://randomuser.me/api/portraits/men/5.jpg",
    skills: ["Java", "Kotlin", "Android Studio", "Firebase"],
    experience: "3 years",
    education: "B.E. in Computer Engineering",
    bio: "Focused on building fast, reliable, and user-friendly Android apps.",
  },
  {
    id: 6,
    name: "Alice Cooper",
    email: "alice.cooper@example.com",
    phone: "+1 415-555-1122",
    address: "12 Broadway Street, San Francisco, CA 94111",
    age: 31,
    occupation: "WordPress Developer",
    department: "Marketing",
    status: "Active",
    joinDate: "2022-05-18",
    avatar: "https://randomuser.me/api/portraits/women/7.jpg",
    skills: ["WordPress", "PHP", "WooCommerce", "SEO"],
    experience: "4 years",
    education: "B.Com with Web Development Certification",
    bio: "Helps businesses grow with powerful WordPress solutions.",
  },
  {
    id: 7,
    name: "Daniel Zhang",
    email: "daniel.zhang@example.com",
    phone: "+86 10 1234 5678",
    address: "Chaoyang District, Beijing, China",
    age: 35,
    occupation: "Full Stack Developer",
    department: "Engineering",
    status: "Active",
    joinDate: "2021-12-03",
    avatar: "https://randomuser.me/api/portraits/men/10.jpg",
    skills: ["React", "Node.js", "MongoDB", "GraphQL"],
    experience: "7 years",
    education: "B.Sc. in Software Engineering",
    bio: "Full stack enthusiast who loves scalable web systems.",
  },
  {
    id: 8,
    name: "Eva Müller",
    email: "eva.muller@example.com",
    phone: "+49 30 123456",
    address: "Kurfürstendamm, Berlin, Germany",
    age: 33,
    occupation: "Cybersecurity Specialist",
    department: "Security",
    status: "Active",
    joinDate: "2022-09-15",
    avatar: "https://randomuser.me/api/portraits/women/11.jpg",
    skills: ["Cybersecurity", "Penetration Testing", "Firewalls", "SIEM"],
    experience: "6 years",
    education: "M.Sc. in Cybersecurity",
    bio: "Dedicated to securing digital environments and data privacy.",
  },

  // Additional 32 profiles

  {
    id: 9,
    name: "Andrea Ingram",
    email: "andrea.ingram@example.net",
    phone: "(213) 407-1231",
    address: "886 Ashley Lock, Port Cynthia, NH 27227",
    age: 33,
    occupation: "Backend Developer",
    department: "Engineering",
    status: "Inactive",
    joinDate: "2023-10-18",
    avatar: "https://randomuser.me/api/portraits/women/9.jpg",
    skills: ["Node.js", "Express", "MongoDB", "SQL"],
    experience: "9 years",
    education: "Geoscientist",
    bio: "Color behavior approach edge someone exactly fine.",
  },
  {
    id: 10,
    name: "David Rivas",
    email: "david.rivas@example.com",
    phone: "612.395.4043x6226",
    address: "652 Adams Stream, East Susanbury, MA 65581",
    age: 42,
    occupation: "Java Developer",
    department: "Engineering",
    status: "Active",
    joinDate: "2023-06-17",
    avatar: "https://randomuser.me/api/portraits/men/10.jpg",
    skills: ["Java", "Spring Boot", "Hibernate", "MySQL"],
    experience: "4 years",
    education: "Designer, multimedia",
    bio: "Southern address deal prevent truth ability conference.",
  },
  {
    id: 11,
    name: "Christopher Cooper",
    email: "christopher.cooper@example.net",
    phone: "+1-674-253-1830",
    address: "4837 Jennifer Island Apt. 026, West Stacy, NY 38641",
    age: 34,
    occupation: "Cybersecurity Specialist",
    department: "Security",
    status: "Inactive",
    joinDate: "2023-07-12",
    avatar: "https://randomuser.me/api/portraits/men/11.jpg",
    skills: ["Cybersecurity", "Penetration Testing", "Firewalls", "SIEM"],
    experience: "10 years",
    education: "Historic buildings inspector/conservation officer",
    bio: "Indeed especially short quite guess budget town today.",
  },
  {
    id: 12,
    name: "Nina Patel",
    email: "nina.patel@example.com",
    phone: "+44 20 7946 1234",
    address: "221B Baker Street, London, UK",
    age: 27,
    occupation: "UI/UX Designer",
    department: "Product",
    status: "Active",
    joinDate: "2023-04-05",
    avatar: "https://randomuser.me/api/portraits/women/12.jpg",
    skills: ["Figma", "Sketch", "Adobe XD", "HTML"],
    experience: "4 years",
    education: "B.A. in Design",
    bio: "Focused on creating intuitive and delightful user experiences.",
  },
  {
    id: 13,
    name: "Liam Turner",
    email: "liam.turner@example.com",
    phone: "+1 646-555-3456",
    address: "789 Broadway, New York, NY 10003",
    age: 38,
    occupation: "DevOps Engineer",
    department: "Engineering",
    status: "Active",
    joinDate: "2022-12-10",
    avatar: "https://randomuser.me/api/portraits/men/13.jpg",
    skills: ["AWS", "Docker", "Kubernetes", "Terraform"],
    experience: "8 years",
    education: "B.Sc. in Computer Engineering",
    bio: "Passionate about automation and scalable infrastructure.",
  },
  {
    id: 14,
    name: "Sophia Martinez",
    email: "sophia.martinez@example.com",
    phone: "+34 91 123 4567",
    address: "Calle de Alcalá, Madrid, Spain",
    age: 29,
    occupation: "Frontend Developer",
    department: "Engineering",
    status: "Active",
    joinDate: "2023-07-22",
    avatar: "https://randomuser.me/api/portraits/women/14.jpg",
    skills: ["React", "TypeScript", "CSS Modules", "Redux"],
    experience: "5 years",
    education: "B.Sc. in Computer Science",
    bio: "Loves creating beautiful and performant web apps.",
  },
  {
    id: 15,
    name: "Ethan Wright",
    email: "ethan.wright@example.com",
    phone: "+1 720-555-8899",
    address: "1234 Elm Street, Denver, CO 80203",
    age: 30,
    occupation: "Product Manager",
    department: "Product",
    status: "Active",
    joinDate: "2023-03-10",
    avatar: "https://randomuser.me/api/portraits/men/15.jpg",
    skills: ["Agile", "Scrum", "Roadmapping", "JIRA"],
    experience: "6 years",
    education: "MBA",
    bio: "Bringing teams together to build customer-centric products.",
  },
  {
    id: 16,
    name: "Olivia Lee",
    email: "olivia.lee@example.com",
    phone: "+61 2 9876 5432",
    address: "1 George Street, Sydney, Australia",
    age: 26,
    occupation: "QA Engineer",
    department: "Engineering",
    status: "Active",
    joinDate: "2023-05-20",
    avatar: "https://randomuser.me/api/portraits/women/16.jpg",
    skills: ["Selenium", "Cypress", "Jest", "Test Automation"],
    experience: "3 years",
    education: "B.Sc. in Information Technology",
    bio: "Ensuring quality through automated testing and detailed reports.",
  },
  {
    id: 17,
    name: "James Harris",
    email: "james.harris@example.com",
    phone: "+44 7911 123456",
    address: "Flat 5, 123 King’s Road, London, UK",
    age: 39,
    occupation: "Systems Analyst",
    department: "Engineering",
    status: "Inactive",
    joinDate: "2021-10-01",
    avatar: "https://randomuser.me/api/portraits/men/17.jpg",
    skills: ["System Design", "SQL", "Business Analysis"],
    experience: "10 years",
    education: "B.Sc. in Information Systems",
    bio: "Bridging business needs and technology solutions.",
  },
  {
    id: 18,
    name: "Isabella Garcia",
    email: "isabella.garcia@example.com",
    phone: "+52 55 1234 5678",
    address: "Av. Insurgentes Sur 1234, Mexico City, Mexico",
    age: 27,
    occupation: "Mobile Developer",
    department: "Engineering",
    status: "Active",
    joinDate: "2023-06-15",
    avatar: "https://randomuser.me/api/portraits/women/18.jpg",
    skills: ["Swift", "iOS", "Objective-C", "Xcode"],
    experience: "4 years",
    education: "B.Sc. in Software Engineering",
    bio: "Passionate about building smooth iOS experiences.",
  },
  {
    id: 19,
    name: "Benjamin Scott",
    email: "benjamin.scott@example.com",
    phone: "+1 503-555-6789",
    address: "456 Oak Street, Portland, OR 97205",
    age: 31,
    occupation: "Data Scientist",
    department: "Analytics",
    status: "Active",
    joinDate: "2022-11-30",
    avatar: "https://randomuser.me/api/portraits/men/19.jpg",
    skills: ["Python", "R", "Machine Learning", "SQL"],
    experience: "6 years",
    education: "M.Sc. in Data Science",
    bio: "Turning data into actionable insights.",
  },
  {
    id: 20,
    name: "Mia Thompson",
    email: "mia@example.com",
    phone: "+1 415-555-7890",
    address: "789 Market Street, San Francisco, CA 94103",
    age: 24,
    occupation: "Content Strategist",
    department: "Marketing",
    status: "Active",
    joinDate: "2023-08-25",
    avatar: "https://randomuser.me/api/portraits/women/20.jpg",
    skills: ["Content Marketing", "SEO", "Copywriting", "Analytics"],
    experience: "3 years",
    education: "B.A. in Communications",
    bio: "Crafting content that connects and converts.",
  },
];

// In-memory storage for profiles (simulating a database)
let profiles = [...sampleProfiles];

// Backend service class
class ProfileService {
  // Get all profiles
  static getAllProfiles() {
    return new Promise((resolve) => {
      // Simulate API delay
      setTimeout(() => {
        resolve([...profiles]);
      }, 100);
    });
  }

  // Get profile by ID
  static getProfileById(id) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        const profile = profiles.find((p) => p.id === parseInt(id));
        if (profile) {
          resolve({ ...profile });
        } else {
          reject(new Error(`Profile with ID ${id} not found`));
        }
      }, 50);
    });
  }

  // Add new profile
  static addProfile(profileData) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        try {
          // Validation
          if (!profileData.name || !profileData.email) {
            reject(new Error("Name and email are required fields"));
            return;
          }

          // Check for duplicate email
          const existingProfile = profiles.find(
            (p) => p.email === profileData.email
          );
          if (existingProfile) {
            reject(new Error("Email already exists"));
            return;
          }

          // Create new profile
          const newProfile = {
            id: Date.now(), // Simple ID generation
            name: profileData.name,
            email: profileData.email,
            phone: profileData.phone || "",
            address: profileData.address || "",
            age: parseInt(profileData.age) || 0,
            occupation: profileData.occupation || "",
            department: profileData.department || "Engineering",
            status: profileData.status || "Active",
            joinDate: new Date().toISOString().split("T")[0],
            avatar: profileData.avatar || null,
            skills: profileData.skills || [],
            experience: profileData.experience || "",
            education: profileData.education || "",
            bio: profileData.bio || "",
          };

          profiles.push(newProfile);
          resolve({ ...newProfile });
        } catch (error) {
          reject(error);
        }
      }, 100);
    });
  }

  // Update profile
  static updateProfile(id, profileData) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        try {
          const profileIndex = profiles.findIndex((p) => p.id === parseInt(id));

          if (profileIndex === -1) {
            reject(new Error(`Profile with ID ${id} not found`));
            return;
          }

          // Validation
          if (!profileData.name || !profileData.email) {
            reject(new Error("Name and email are required fields"));
            return;
          }

          // Check for duplicate email (excluding current profile)
          const existingProfile = profiles.find(
            (p) => p.email === profileData.email && p.id !== parseInt(id)
          );
          if (existingProfile) {
            reject(new Error("Email already exists"));
            return;
          }

          // Update profile
          const updatedProfile = {
            ...profiles[profileIndex],
            name: profileData.name,
            email: profileData.email,
            phone: profileData.phone || profiles[profileIndex].phone,
            address: profileData.address || profiles[profileIndex].address,
            age: parseInt(profileData.age) || profiles[profileIndex].age,
            occupation:
              profileData.occupation || profiles[profileIndex].occupation,
            department:
              profileData.department || profiles[profileIndex].department,
            status: profileData.status || profiles[profileIndex].status,
            skills: profileData.skills || profiles[profileIndex].skills,
            experience:
              profileData.experience || profiles[profileIndex].experience,
            education:
              profileData.education || profiles[profileIndex].education,
            bio: profileData.bio || profiles[profileIndex].bio,
          };

          profiles[profileIndex] = updatedProfile;
          resolve({ ...updatedProfile });
        } catch (error) {
          reject(error);
        }
      }, 100);
    });
  }

  // Delete profile
  static deleteProfile(id) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        const profileIndex = profiles.findIndex((p) => p.id === parseInt(id));

        if (profileIndex === -1) {
          reject(new Error(`Profile with ID ${id} not found`));
          return;
        }

        const deletedProfile = profiles.splice(profileIndex, 1)[0];
        resolve({ ...deletedProfile });
      }, 100);
    });
  }

  // Search profiles
  static searchProfiles(searchTerm, filters = {}) {
    return new Promise((resolve) => {
      setTimeout(() => {
        let filteredProfiles = [...profiles];

        // Apply search term
        if (searchTerm) {
          const term = searchTerm.toLowerCase();
          filteredProfiles = filteredProfiles.filter(
            (profile) =>
              profile.name.toLowerCase().includes(term) ||
              profile.email.toLowerCase().includes(term) ||
              profile.occupation.toLowerCase().includes(term) ||
              profile.department.toLowerCase().includes(term)
          );
        }

        // Apply filters
        if (filters.status && filters.status !== "All") {
          filteredProfiles = filteredProfiles.filter(
            (profile) => profile.status === filters.status
          );
        }

        if (filters.department && filters.department !== "All") {
          filteredProfiles = filteredProfiles.filter(
            (profile) => profile.department === filters.department
          );
        }

        resolve(filteredProfiles);
      }, 50);
    });
  }

  // Get available departments
  static getDepartments() {
    return new Promise((resolve) => {
      setTimeout(() => {
        const departments = [...new Set(profiles.map((p) => p.department))];
        resolve(["All", ...departments.sort()]);
      }, 50);
    });
  }

  // Get profile statistics
  static getStatistics() {
    return new Promise((resolve) => {
      setTimeout(() => {
        const stats = {
          total: profiles.length,
          active: profiles.filter((p) => p.status === "Active").length,
          inactive: profiles.filter((p) => p.status === "Inactive").length,
          departments: {},
        };

        // Count by department
        profiles.forEach((profile) => {
          stats.departments[profile.department] =
            (stats.departments[profile.department] || 0) + 1;
        });

        resolve(stats);
      }, 50);
    });
  }

  // Bulk operations
  static bulkUpdateStatus(profileIds, status) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        try {
          const updatedProfiles = [];

          profileIds.forEach((id) => {
            const profileIndex = profiles.findIndex(
              (p) => p.id === parseInt(id)
            );
            if (profileIndex !== -1) {
              profiles[profileIndex].status = status;
              updatedProfiles.push({ ...profiles[profileIndex] });
            }
          });

          resolve(updatedProfiles);
        } catch (error) {
          reject(error);
        }
      }, 100);
    });
  }

  // Export profiles (for backup/download)
  static exportProfiles() {
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          exportDate: new Date().toISOString(),
          totalProfiles: profiles.length,
          profiles: [...profiles],
        });
      }, 200);
    });
  }

  // Import profiles (for restore/upload)
  static importProfiles(profilesData, options = { merge: false }) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        try {
          if (!Array.isArray(profilesData)) {
            reject(new Error("Invalid profiles data format"));
            return;
          }

          if (options.merge) {
            // Merge with existing profiles
            const existingEmails = new Set(profiles.map((p) => p.email));
            const newProfiles = profilesData.filter(
              (p) => !existingEmails.has(p.email)
            );
            profiles = [...profiles, ...newProfiles];
          } else {
            // Replace all profiles
            profiles = [...profilesData];
          }

          resolve({
            imported: profilesData.length,
            total: profiles.length,
          });
        } catch (error) {
          reject(error);
        }
      }, 200);
    });
  }
}

export default ProfileService;
